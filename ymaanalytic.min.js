var Interactor=function(config){this.__init__(config)};function setYAConfig(apiKey,interactionElement,conversionElement){var trackIntractions=!0,interactionElementToTrack=interactionElement,trackConversion=!0,conversionElementToTrack=conversionElement;if(void 0!==apiKey&&""!==apiKey){"object"==typeof interactionElement||Array.isArray(interactionElement)||(console.warn("YuktaMedia Analytics Warning -> Intraction should be provide as list of classes. Ignoring for given input"),trackIntractions=!1,interactionElementToTrack=[]),"object"==typeof conversionElement||Array.isArray(conversionElement)||(console.warn("YuktaMedia Analytics Warning -> Conversion should be provide as list of classes. Ignoring for given input"),trackConversion=!1,conversionElementToTrack=[]);new Interactor({interactions:trackIntractions,interactionElement:interactionElementToTrack,interactionEvents:["mouseup","touchend"],conversions:trackConversion,conversionElement:conversionElementToTrack,conversionEvents:["mouseup","touchend"],endpoint:"https://analytics.yuktamedia.com/api/cdp/v1/datasync",apiKey:apiKey,async:!0,debug:!1})}else console.error("YuktaMedia Analytics Error -> API key is not provided or is invalid")}Interactor.prototype={__init__:function(config){return this.interactions="boolean"!=typeof config.interactions||config.interactions,this.interactionElement="object"==typeof config.interactionElement?config.interactionElement:["interaction"],this.interactionEvents=!0===Array.isArray(config.interactionEvents)?config.interactionEvents:["mouseup","touchend"],this.conversions="boolean"!=typeof config.conversions||config.conversions,this.conversionElement="object"==typeof config.conversionElement?config.conversionElement:["conversion"],this.conversionEvents=!0===Array.isArray(config.conversionEvents)?config.conversionEvents:["mouseup","touchend"],this.endpoint="string"==typeof config.endpoint?config.endpoint:"https://analytics.yuktamedia.com/api/cdp/v1/datasync",this.async="boolean"!=typeof config.async||config.async,this.debug="boolean"==typeof config.debug&&config.debug,this.apiKey="string"==typeof config.apiKey?config.apiKey:"",this.records=[],this.session={},this.loadTime=new Date,this.__initializeSession__(),this.__bindEvents__(),this.__sendPageLoadEvent__(),this},__bindEvents__:function(){var interactor=this;if(!0===interactor.interactions)for(var i=0;i<interactor.interactionEvents.length;i++)document.querySelector("body").addEventListener(interactor.interactionEvents[i],function(e){e.stopPropagation();for(var j=0;j<interactor.interactionElement.length;j++)e.target.classList.value===interactor.interactionElement[j]&&interactor.__addInteraction__(e,"interaction")});if(!0===interactor.conversions)for(var k=0;k<interactor.conversionEvents.length;k++)document.querySelector("body").addEventListener(interactor.conversionEvents[k],function(e){e.stopPropagation();for(var l=0;l<interactor.conversionElement.length;l++)e.target.classList.value===interactor.conversionElement[l]&&interactor.__addInteraction__(e,"conversion")});return window.addEventListener("beforeunload",function(event){interactor.__sendInteractions__()}),interactor},__addInteraction__:function(e,type){var interaction={type:type,event:e.type,targetTag:e.target.nodeName,targetClasses:e.target.className,content:e.target.innerText,clientPosition:{x:e.clientX,y:e.clientY},screenPosition:{x:e.screenX,y:e.screenY},createdAt:new Date};return this.records.push(interaction),this.debug&&this.__closeSession__(),this},__initializeSession__:function(){return this.session={loadTime:this.loadTime,unloadTime:new Date,token:this.apiKey,language:window.navigator.language,platform:window.navigator.platform,port:window.location.port,page_path:window.location.pathname,page_url:window.location.href,page_origin:window.location.origin,page_title:document.title,page_description:this.__getContentsOfMeta__("og:description"),page_type:this.__getContentsOfMeta__("og:type"),page_keywords:this.__getContentsOfMeta__("keywords"),page_author:this.__getContentsOfMeta__("author"),page_tag:this.__getContentsOfMeta__("article:tag"),page_section:this.__getContentsOfMeta__("article:section"),endpoint:this.endpoint},this},__closeSession__:function(){return this.session.unloadTime=new Date,this.session.event_type="page unload",this.session.token=this.apiKey,this.session.interactions=this.records,this.session.navigator_app_name=window.navigator.appVersion,this.session.navigator_innerWidth=window.innerWidth,this.session.navigator_innerHeight=window.innerHeight,this.session.navigator_outerWidth=window.outerWidth,this.session.navigator_outerHeight=window.outerHeight,this},__sendInteractions__:function(){var xhr=new XMLHttpRequest;return this.__closeSession__(),xhr.open("POST",this.endpoint,this.async),xhr.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),xhr.withCredentials=!0,xhr.send(JSON.stringify(this.session)),this},__sendPageLoadEvent__:function(){var xhr=new XMLHttpRequest;return xhr.open("POST",this.endpoint,this.async),xhr.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),xhr.withCredentials=!0,xhr.send(JSON.stringify({event_type:"page load",loadTime:new Date,token:this.apiKey,language:window.navigator.language,platform:window.navigator.platform,port:window.location.port,navigator_app_name:window.navigator.appVersion,navigator_innerWidth:window.innerWidth,navigator_innerHeight:window.innerHeight,navigator_outerWidth:window.outerWidth,navigator_outerHeight:window.outerHeight,page_path:window.location.pathname,page_url:window.location.href,page_origin:window.location.origin,page_title:document.title,page_description:this.__getContentsOfMeta__("og:description"),page_type:this.__getContentsOfMeta__("og:type"),page_keywords:this.__getContentsOfMeta__("keywords"),page_author:this.__getContentsOfMeta__("author"),page_tag:this.__getContentsOfMeta__("article:tag"),page_section:this.__getContentsOfMeta__("article:section")})),this},__getContentsOfMeta__:function(metaName){for(var metas=document.getElementsByTagName("meta"),contents=[],i=0;i<metas.length;i++)metas[i].getAttribute("name")!==metaName&&metas[i].getAttribute("property")!==metaName||contents.push(metas[i].getAttribute("content"));return contents.length?contents.join(","):""}};